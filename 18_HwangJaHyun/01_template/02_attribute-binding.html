<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body>
<!--
  - Vue 객체 : vue application의 중앙 관리자. 필요한 프로퍼티, 함수를 제공
  - createApp() : view instance 를 생성하는 메서드
  - mount() : 생성된 vue instance를 DOM요소와 연결해서 지정된 요소에 vue instance 값을 랜더링하는 메서드
  - {{}} : (보간법) vue instance의 setup에서 반환된 값을 text형태로 출력
  - v-bind : 요소의 속성을 동적으로 바인딩하는 디렉티브(지시자)
  - ref() : 단일 값 또는 객체를 반응형(상태) 변수로 만드는 메서드
            ref() 인자로 전달된 값이 변경되는 지 vue instance가 계속 참조
            -> 변경되면 view Model이 반응, View를 변경
  - reactive() :
-->
<div id="step1">
  <div>{{staticValue}}</div>

  <!-- 속성 바인딩 : v-bind: 속성 또는 : 속성 -->
  <div v-bind:id="dynamicId">{{dynamicValue}}</div>
  <div :id="skipId" v-text="skipValue"></div>
</div>
<hr>
<div id="step2">
  <!-- v-on 디렉티브 : 이벤트 핸들러를 연결하는 디렉티브 (이벤트 리스너 등록) -->
  <button v-on:click="activation">click!</button>
  <br>
  <!-- template 영역에서는 ref(), reactive()모두 .value 사용 X -->
  <!-- v-on 디렉티브를 축약해서 @기호로 대체 가능 -->
  <button @click="activation">{{isTrue}}</button>
</div>

<script>
  const {createApp, ref, reactive} = Vue;

  createApp({
    name: 'v-bind test app', // 생성되는 vue instance의 이름
    /* setup() : composition api의 진입점
    *            생성되는 컴포넌트에 대한 설정을 하는 메서드
    * */
    setup() {
      const staticValue = "정적 값입니다.";

      // 반응형 변수(또는 상태 변수) 선언
      const dynamicValue = ref("동적 값입니다."); // vue모델에게 전달
      const dynamicId = ref("vue");
      const skipId = ref('skip');
      const skipValue = ref('skip 값 입니다.')

      // setup() 메서드의 반환 객체의 프로퍼티는
      // mount(붙이다)된 요소에서 사용 가능
      return {staticValue, dynamicValue, dynamicId, skipId, skipValue} // === { staticValue: staticValue } 객체 생성 시 key와 value 값이 같다면 두번 쓰지 않고 한번만 써도 됨
    }
  }).mount('#step1'); // 생성된 vue instance를 DOM 요소에 붙임
  /* # step2용 vue instance 새로 생성 */
  createApp({
    name: 'reactive, v-on test app',

    /* ref vs reactive
    * 1. ref는 모든 자료형에 사용 가능하며
    *    reactive는 객체 자료형에만 사용가능
    * 2. ref는 setup함수 내에서 접근할 때 .value를 사용하며 reactive는 사용하지 않는다.
    *
    * 단, template영역에서는 둘다 .value를 사용하지 않는다.
    * */
    setup() {
      const isTrue = ref(false);
      const reactiveObj = reactive({test: 'reactive test'});

      const activation = () => {
        console.log('isTrue : ', isTrue);
        console.log('isTrue.value : ', isTrue.value);

        console.log('reactiveObj :', reactiveObj);
        console.log('reactiveObj.test : ', reactiveObj.test);

        // isTrue의 값을 true <-> false 교차하며 변경
        isTrue.value = !isTrue.value;
      }
      return {isTrue, reactiveObj, activation}
    }
  }).mount('#step2');
</script>

</body>
</html>

<!--
    화면변경 요청
    VM 변경 == vue instance
-->